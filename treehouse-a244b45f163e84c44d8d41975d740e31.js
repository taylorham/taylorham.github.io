function loadScores(){$("#loader-wrapper").show(),newTopics=$("#topics"),topics=[],totalScore=0,$.getJSON("https://teamtreehouse.com/taylorham.json",function(e){var t=e.points,a="#000",r={};r.Android="#5cb860",r.Business="#f9845b",r.CSS="#3079ab",r.Design="#e59a13",r["Development Tools"]="#637a91",r.HTML="#39add1",r.iOS="#53bbb4",r.Java="#2c9676",r.JavaScript="#c25975",r.PHP="#7d669e",r.Python="#f092b0",r.Ruby="#e15258",r.WordPress="#838cc7",r["Digital Literacy"]="#c38cd4";var o=[];$.each(t,function(e,t){0!==t&&("total"===e.toLowerCase()?$("strong.total").text(t):t>=100&&o.push([e,t]))});var s=[];for(s=0===o.length?o:[o.shift()];o.length>0;)for(i=0;i<s.length;i++){if(o[0][1]>s[i][1]){s.splice(i,0,o.shift());break}if(i===s.length-1){s.push(o.shift());break}}for(i=0;i<s.length;i++){var n=s[i][0],c=s[i][1];if(r[n])var a=r[n];topics.push('<li class="'+n.toLowerCase().replace(" ","")+'" style="border-color:'+a+'"><em>'+n+"</em><span>"+c+"</span></li>")}newTopics.append(topics),createPie(".legend"),$("#loader-wrapper").fadeOut(),$(".treehouse-widget").fadeIn()})}function createPie(e){var t=280,a=280,r=Math.min(t,a)/2,i=[],o=[];$(e+" li").each(function(){var e={};e.topic=$(this).children("em").text(),e.color=$(this).css("border-color"),i.push($(this).css("border-color")),e.points=$(this).children("span").text(),o.push(e)});var s=(d3.scale.ordinal().range(i),d3.svg.arc().outerRadius(r-20).innerRadius(r-70)),n=d3.layout.pie().value(function(e){return e.points}),c=d3.select(".pie").append("svg").attr("width",t).attr("height",a).append("g").attr("transform","translate("+t/2+","+a/2+")"),p=c.selectAll(".arc").data(n(o)).enter().append("g").attr("class","arc");p.append("path").attr("d",s),p.append("title").text(function(e){return e.data.topic}),p.attr("id",function(e){return"pie-"+e.data.topic.toLowerCase().replace(" ","")})}$(document).ready(function(){loadScores()});